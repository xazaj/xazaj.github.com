
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>xazaJ's blog</title>
  <meta name="author" content="xazaJ">

  
  <meta name="description" content="第一章 Rails3.2 环境配置 1、用rvm安装ruby&amp;rails Ruby安装： $ rvm get head &amp;&amp; rvm reload $ rvm install 1.9.3 创建rails gemsets $ rvm use 1.9.3@ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xazaj.github.com/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="xazaJ's blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner">
<hgroup>
  <h1><a href="/">xazaJ's blog</a></h1>
  
</hgroup>
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:xazaj.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/17/new-post.html">New Post</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-17T07:32:00+08:00" pubdate data-updated="true">2012-06-17 Sun</time>
        
         | <a href="/blog/2012/06/17/new-post.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>第一章 Rails3.2 环境配置</h1>

<h2>1、用rvm安装ruby&amp;rails</h2>

<h3>Ruby安装：</h3>

<pre><code>    $ rvm get head &amp;&amp; rvm reload
    $ rvm install 1.9.3
</code></pre>

<h3>创建rails gemsets</h3>

<pre><code>    $ rvm use 1.9.3@rails3tutorial2ndEd --create --default
</code></pre>

<h3>更新RubyGems版本为本教程使用的版本：</h3>

<pre><code>    $ gem update --system 1.8.24
</code></pre>

<p>用subl编辑gemrc</p>

<pre><code>    $ subl ~/.gemrc
</code></pre>

<p>编辑gemrc文件：</p>

<blockquote><p>install： &#8211;no-rdoc &#8211;no-ri</p>

<p>update: &#8211;no-rdoc &#8211;no-ri</p></blockquote>

<h3>Rails安装：</h3>

<pre><code>    gem install rails -v 3.2.5
</code></pre>

<h2>2、第一个应用程序</h2>

<h3>运行rails创建第一个应用程序：</h3>

<pre><code>    $ mkdir rails_projects
    $ cd rails_projects
    $ rails new first_app
</code></pre>

<h3>修改bundle的gem源：</h3>

<pre><code>$ cd first_app/
$ subl Gemfile
</code></pre>

<p>将source中源：<code>https://rubygems.org</code>更改为：<code>http://www.ruby.taobao.org</code></p>

<h3>修改Gem版本：</h3>

<p>将</p>

<pre><code>gem 'jquery-rails'
</code></pre>

<p>改成：</p>

<pre><code>gem 'jquery-rails','2.0.0'  
</code></pre>

<p>将</p>

<pre><code>gem 'sqlite3'
</code></pre>

<p>改成：</p>

<pre><code>group :development 
    do gem 'sqlite3', '1.3.5'
end    
</code></pre>

<p>将：</p>

<pre><code>group :assets do
    gem 'sass-rails', '~&gt; 3.2.3' 
    gem 'coffee-rails', '~&gt; 3.2.2' 
    gem 'uglifier', '&gt;= 1.2.3'
end
</code></pre>

<p>改成：</p>

<pre><code>group :assets do
    gem 'sass-rails', '~&gt; 3.2.3' 
    gem 'coffee-rails', '~&gt; 3.2.2' 
    gem 'uglifier', '&gt;= 1.2.3'
end 
</code></pre>

<p>Gemfile文件修改好后，用<code>bundle install</code>安装gem：</p>

<pre><code>$ bundle install
</code></pre>

<h2>3、Rails server</h2>

<p>运行rails服务器：</p>

<pre><code>$ rails server
=&gt; Booting WEBrick
=&gt; Rails application starting on http://0.0.0.0:3000 =&gt;     Call with -d to detach
=&gt; Ctrl-C to shutdown server
</code></pre>

<p>运行成功后，通过浏览器访问：<a href="http://localhost:3000">http://localhost:3000</a></p>

<h2>4、Git版本控制</h2>

<h3>安装配置：</h3>

<p>安装过程见官方文档：<a href="http://progit.org/book/ch1-4.html">Installing Git section of Pro Git</a></p>

<h3>首次全局配置：</h3>

<p>Git安装完成后，需要执行一个一次性安装步骤，这个是系统安装，每台电脑上都必须做一次：</p>

<pre><code>$ git config --global user.name "Your Name"
$ git config --global user.email your.email@example.com
</code></pre>

<p>如果需要将<code>checkout</code>命令简化为<code>co</code>,则需要进行如下设置：</p>

<pre><code>$git config --global alias.co checkout
</code></pre>

<p>设置的最后一步，需要设置一个常用的编辑器来编辑commit信息：</p>

<pre><code>$ git config --global core.editor "subl -w"
</code></pre>

<p>如果使用TextMate，则使用<code>"mate -w"</code>,如果使用gVim，则使用<code>"gvim -v"</code>,如果使用MacVim，则使用<code>"mvim -f"</code>。</p>

<h3>首次库配置：</h3>

<p>下面是每次创建一个新代码库所必须的步骤:</p>

<h4>* 将终端进入项目目录，初始化代码仓库：</h4>

<pre><code>    $ git init
    Initialized empty Git repository in /Users/mhartl/rails_projects/first_app/.git/
</code></pre>

<h4>* 通过<code>.gitignore</code>文件，配置git版本控制时忽略的文件:</h4>

<blockquote><p># See http://help.github.com/ignore-files/ for more about ignoring files.</p>

<p>#</p>

<p># If you find yourself ignoring temporary files generated by your text editor</p>

<p># or operating system, you probably want to add a global ignore instead:</p>

<p># git config &#8211;global core.excludesfile ~/.gitignore_global</p>

<p># Ignore bundler config
.bundle</p>

<p># Ignore the default SQLite database.
/db/*.sqlite3</p>

<p># Ignore all logfiles and tempfiles.
/log/*.log</p>

<p>/tmp</p>

<p># Ignore other unneeded files.</p>

<p>doc/</p>

<p>*.swp</p>

<p>*~.project
.DS_Store</p></blockquote>

<h4>* Adding and Committing</h4>

<p>最后一步，将Rails项目中的文件加入到Git中，然后commit，可用如下命令将所有文件加入Staging区域（此步会根据 <code>.gitignore</code>配置忽略对应文件）</p>

<pre><code>    $ git add .
</code></pre>

<p>使用<code>git status</code>查看文件状态：</p>

<pre><code>$ git status
#On branch master
#Initial commit
#Changes to be committed:
#   (use "git rm --cached &lt;file&gt;..." to unstage)
#   new file: README.rdoc
#   new file: Rakefile
.
.
</code></pre>

<p>如果生效以上改变，用<code>commit</code>命令：</p>

<pre><code>$ git commit -m "Initial commit"
[master (root-commit) df0a62f] Initial commit
42 files changed, 8461 insertions(+), 0 deletions(-)    create mode 100644 README.rdoc
create mode 100644 Rakefile
.
.
</code></pre>

<h3>Git的好处：</h3>

<p>举例说明Git给我们带来的好处，我们删除一个文件夹：</p>

<pre><code>$ ls app/controllers/
application_contraller.rb
$rm -rf app/controllers/
$ls app/controllers/
ls: app/controllers/: No such file or directory
</code></pre>

<p>用<code>git status</code>查看下状态变化：</p>

<pre><code>$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add/rm &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   deleted:    app/controllers/application_controller.rb
#
no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>

<p>可以看到删除操作还未<code>commit</code>，可以通过<code>checkout</code>取消删除操作：</p>

<pre><code>$ git checkout -f
PAbank:first_app akexazaj$ git status
# On branch master
nothing to commit (working directory clean)
PAbank:first_app akexazaj$ ls app/controllers/
application_controller.rb
</code></pre>

<h3>Github</h3>

<p>先根据<a href="https://help.github.com/articles/generating-ssh-keys">GitHub tutorial on creating SSH keys</a>配置github：</p>

<h4>1.检查SSH keys:</h4>

<hr />

<p>如果已存在你需要的keypair，则跳到第四步，若不存在，则通过以下命令检查本机已存在的ssh keys。</p>

<pre><code>$ cd ~/.ssh
# Checks to see if there is a directory named ".ssh" in your user directory
</code></pre>

<p>如果<code>"No such file or directory"</code>则跳到第三步，否则继续第二步。</p>

<h4>2.备份并删除已存在的SSH keys:</h4>

<hr />

<pre><code>$ ls
# Lists all the subdirectories in the current directory
config  id_rsa  id_rsa.pub  known_hosts

mkdir key_backup
# Makes a subdirectory called "key_backup" in the current directory

cp id_rsa* key_backup
# Copies the id_rsa keypair into key_backup

rm id_rsa*
# Deletes the id_rsa keypair
</code></pre>

<h4>3.生成新的SSH key：</h4>

<hr />

<p>输入下面代码生成新的SSH key,让我们输入一个文件保存key时，直接敲回车：</p>

<pre><code>ssh-keygen -t rsa -C "your_email@youremail.com"
# Creates a new ssh key using the provided email

Generating public/private rsa key pair.
Enter file in which to save the key (/your_home_path/.ssh/id_rsa):
</code></pre>

<p>接下来要输入密码：</p>

<pre><code>Enter passphrase (empty for no passphrase): [Type a passphrase]
Enter same passphrase again: [Type passphrase again]
</code></pre>

<p>如果成功会返回如下信息：</p>

<pre><code>Your identification has been saved in /your_home_path/.ssh/id_rsa.
Your public key has been saved in /your_home_path/.ssh/id_rsa.pub.
The key fingerprint is:
01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@youremail.com
</code></pre>

<h4>4.将SSH key加入到Github中：</h4>

<p>用编辑器(本教程建议使用subl)打开<code>id_rsa.pub</code>，全选，复制，然后登陆Github按以下步骤执行：</p>

<blockquote><p>1、进入<code>Account Settings</code></p>

<p>2、左边菜单点击：<code>SSH Keys</code></p>

<p>3、点击：<code>Add SSH key</code></p>

<p>4、将复制的key粘贴到<code>key</code>文本框</p>

<p>5、点击<code>Add key</code></p>

<p>6、输入Github密码确认</p></blockquote>

<h4>5.验证</h4>

<p>用以下命令验证Github的SSH是否配置正确，注意：不要改动命令中的<code>git@github.com</code>,这个命令中需要这么写。</p>

<pre><code>$ ssh -T git@github.com
# Attempts to ssh to github
</code></pre>

<p>此时可能会看到以下警告：</p>

<pre><code>The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)?
</code></pre>

<p>不用担心，如果出现了这个警告输入<code>yes</code></p>

<pre><code>Hi username! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>

<p>如果上面用户名是正确的，说明SSH key已安装成功！</p>

<p>接下来我们将用以下命令push我们的应用到Github：</p>

<pre><code>￼￼￼$ git remote add origin git@github.com:&lt;username&gt;/first_app.git 
$ git push -u origin master
</code></pre>

<p>这些命令行是让Git把你代码库中的主分支push到Github中。</p>

<h3>Branch,edit,commit,merge</h3>

<h4>Branch</h4>

<p>使用<code>checkout -b</code>新建一个topic branch：</p>

<pre><code>$ git checkout -b modify-README
Switched to a new branch 'modify-README'
$ git branch
master
* modify-README
</code></pre>

<p>这里用到两个命令：<code>git branch</code>显示目前本地所有的分支，其中<code>*</code>代表我们目前正在使用的分支；<code>git checkout -b modify-README</code>创建一个分支同时切换到该分支上。</p>

<h4>Edit</h4>

<p>我们使用markdown编辑Rdoc,先用mv命令修改文件名：</p>

<pre><code>$ git mv README.rdoc README.md
$ subl README.md
</code></pre>

<p>修改README.md内容：</p>

<blockquote><p># Ruby on Rails Tutorial: first application</p>

<p>这是教程Ruby on Rails Tutorial的第一个应用程序。</p></blockquote>

<h4>Commit</h4>

<p>文件修改后，我们看一下branch的状态：</p>

<pre><code>$ git status
# On branch modify-README
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#   renamed:    README.rdoc -&gt; README.md
#
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   README.md
#
</code></pre>

<p>这里我们也可以用<code>git add</code>,但Git也提供了参数<code>-a</code>（非常常用）提交现存文件的所有修改（或者使用git mv修改的文件，不会当做新文件提交给Git）：</p>

<pre><code>$ git commit -a -m "Improve the README file"
2 files changed, 3 insertions(+), 261 deletions(-)
create mode 100644 README.md
delete mode 100644 README.rdoc
</code></pre>

<p>要慎用<code>-a</code>参数，在最后以此commit之后，如果你的项目中新增了文件，就必须要用<code>git add</code>告诉Git。</p>

<h4>Merge</h4>

<p>现在我们已经完成了更改，准备将结果merge到master分支：</p>

<pre><code>$ git checkout master
Switched to branch 'master'
$ git merge modify-README
Updating 230a578..d220975
Fast-forward
README.md   |    3 +
README.rdoc | 261------------------------------------
2 files changed, 3 insertions(+), 261 deletions(-)
create mode 100644 README.md
delete mode 100644 README.rdoc
</code></pre>

<p>当你merge了你的变更后，可以通过<code>git branch -d</code>删除topic分支。</p>

<pre><code>$ git branch -d modify-README
Deleted branch modify-README (was d220975).
</code></pre>

<p>如上所述，也可以放弃某个分支的变化，这种情况下应该使用<code>git branch -D</code>:</p>

<pre><code># For illustration only; don't do this unless you mess up a branch
$ git checkout -b topic-branch
$ &lt;really screw up the branch&gt;
$ git add .
$ git commit -a -m "Major screw up" $ git checkout master
$ git branch -D topic-branch
</code></pre>

<p>不同于<code>-d</code>参数，<code>-D</code>会删除我们还没有merge的分支。</p>

<h4>Push</h4>

<p>将更改后的README push到github上。在很多系统中我们可以省略origin master，简写命令：<code>git push</code>:</p>

<pre><code>$ git push
</code></pre>

<p>就像之前说过的，GitHub会很漂亮的格式化markdown文件。</p>

<h2>5、部署</h2>

<h3>Heroku安装</h3>

<p>本教程使用Heroku部署应用程序，注册好Heroku账号以后，安装Heroku的gem：</p>

<pre><code>$ gem install heroku
</code></pre>

<p>和Github一样，使用Heroku时需要<a href="https://help.github.com/articles/generating-ssh-keys">创建SSH keys</a>,并且告诉Heroku你的public key，这样你才可以用Git将应用程序push到服务器上：</p>

<pre><code>$ heroku keys:add
</code></pre>

<p>最后用<code>heroku</code>命令在Heroku服务器上创建一个空间给sample app:</p>

<pre><code>$ heroku create --stack cedar
Creating radiant-sunrise-2158... done, stack is cedar
http://radiant-sunrise-2158.herokuapp.com/ |git@heroku.com:radiant-sunrise-2158.git
Git remote heroku added
</code></pre>

<h3>Heroku开发第一步</h3>

<p>要将应用程序部署到heroku，第一步是用Git将程序push到Heroku：</p>

<pre><code>$ git push heroku master
</code></pre>

<h3>Heroku开发第二步</h3>

<p>其实没有第二步，我已经完成了部署工作。为了看到我们部署的程序，可以访问创建heroku时生成的网站，但是这个网址是自动生成的，不容易记住，所以我们可以用命令直接在浏览器中打开应用：</p>

<pre><code>$ heroku open
</code></pre>

<h3>Heroku命令</h3>

<p>有很多<a href="http://devcenter.heroku.com/heroku-command">Heroku命令</a>可用，本教程不多介绍。我们介绍一个修改程序名称的命令：</p>

<pre><code>$ heroku rename xazaj
</code></pre>

<h3>Git\Heroku</h3>

<pre><code>$ git checkout -b 分支名
$ subl 文件名，修改文件
$ git add .
$ git commit -m "分支说明"
$ git checkout master
$ git merge 子分支
$ git push
$ git push heroku
</code></pre>

<p>第一章完~</p>

<hr />

<p> <div class="footer"></p>

<pre><code>    &amp;copy; 2012 [xazaj](http://www.zhuaijun.cn "测试人生") Corporation
&lt;/div&gt;
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/17/static-pages.html">Static Pages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-17T06:43:00+08:00" pubdate data-updated="true">2012-06-17 Sun</time>
        
         | <a href="/blog/2012/06/17/static-pages.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>第二章 静态页面</h1>

<p>ruby学习笔记</p>

<pre><code>ruby -v
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="googleplus">
  

  
  
  
  <div class="clear:both"></div>
</section><section>
  <div class="googleplus odd" style="height:10px;padding-top:20px;">
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style ">
      <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f38a0297ac7eadf"></script>
    <!-- AddThis Button END -->
  </div>
  <div class="clear:both"></div>
</section><section>
  <div class="googleplus odd" style="padding-bottom: 1px;">
    <!-- JiaThis Button BEGIN -->
    <div id="ckepop">
      <a href="http://www.jiathis.com/share?uid=898844" class="jiathis jiathis_txt" target="_blank"><img src="http://v2.jiathis.com/code_mini/images/btn/v1/jiathis5.gif" border="0" /></a>
      <a class="jiathis_counter_style_margin:3px 0 0 2px"></a>
    </div>
    <script type="text/javascript" >
      var jiathis_config={
        data_track_clickback:true,
        summary:"",
        hideMore:false
      }
    </script>
    <script type="text/javascript" src="http://v2.jiathis.com/code/jia.js?uid=898844" charset="utf-8"></script>
    <!-- JiaThis Button END -->
  </div>
  <div class="clear:both"></div>
</section>
<section id="comment_sidebar">
  <h1>Recent Comments</h1>
  <div id="recentcomments" class="dsq-widget">
    <script type="text/javascript" src="http://xazaj.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=200"></script>
  </div>
  <a target="_blank" href="http://disqus.com/">Powered by Disqus</a>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/17/new-post.html">New Post</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/17/static-pages.html">static pages</a>
      </li>
    
  </ul>
</section>
<section id="blogroll" class="odd">
<h1>My Friends</h1>
<ul style="padding-left:0">
	<li><a href="http://www.zhuaijun.cn/" target="_blank">测试人生</a></li>
	<li><a href="#" target="_blank">老田</a></li>
	<li><a href="#" target="_blank">张松</a></li>
	<li><a href="#" target="_blank">。。。</a></li>
</ul>
</section><section>
 <h1>Categories</h1>
 <ul id="categories">
 <li class='category'><a href=' /blog/categories/rails/'>Rails (1)</a></li>
<li class='category'><a href=' /blog/categories/ruby/'>Ruby (1)</a></li>

 </ul>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - xazaJ -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'xazaj';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
